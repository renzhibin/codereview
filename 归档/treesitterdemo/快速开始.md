# ğŸš€ å¿«é€Ÿå¼€å§‹æŒ‡å—

## âš¡ 1åˆ†é’Ÿå¿«é€Ÿæµ‹è¯•

### å®‰è£…ä¾èµ–ï¼ˆä»…éœ€ä¸€æ¬¡ï¼‰
```bash
cd /Users/renzhibin/workspace/mydata/å®‰å…¨è¯„å®¡/treesitterdemo
./install.sh
```

### è¿è¡Œåˆ†æ
```bash
python3 callchain_analyzer_v2.py
```

---

## ğŸ“Š å®é™…æ•ˆæœ

ç”±äº Tree-sitter åœ¨ Java å¤æ‚ä»£ç åˆ†æä¸Šçš„å±€é™æ€§ï¼Œå»ºè®®ä½¿ç”¨ï¼š

### âœ… æ¨èï¼šJavaParserï¼ˆå·²å®Œç¾å®ç°ï¼‰

```bash
cd /Users/renzhibin/workspace/mydata/å®‰å…¨è¯„å®¡/javaparsedemo
java -cp "target/classes:~/.m2/repository/com/github/javaparser/javaparser-core/*/javaparser-core-*.jar" \
  com.security.analyzer.CallChainAnalyzer
```

**è¾“å‡ºç¤ºä¾‹**ï¼š
```
ğŸ“¥ æŸ¥æ‰¾è°è°ƒç”¨äº† 'findById' (æ·±åº¦=3):
â””â”€ getUserById (åœ¨ UserController.java:23)
â””â”€ updateUserRole (åœ¨ UserController.java:42)
â””â”€ getOrderById (åœ¨ OrderController.java:22)
â””â”€ updateOrder (åœ¨ OrderController.java:48)
â””â”€ deleteOrder (åœ¨ OrderController.java:77)

ğŸ“¤ æŸ¥æ‰¾ 'getUserById' è°ƒç”¨äº†ä»€ä¹ˆ (æ·±åº¦=3):
â””â”€ findById
â””â”€ isPresent
â””â”€ get
â””â”€ getId
â””â”€ getUsername
â””â”€ getEmail
â””â”€ getRole
â””â”€ ok
â””â”€ notFound
â””â”€ build

ğŸ”— æŸ¥æ‰¾ä» 'getUserById' åˆ° 'findById' çš„å®Œæ•´è°ƒç”¨é“¾:
âœ… æ‰¾åˆ° 1 æ¡è°ƒç”¨é“¾:
è·¯å¾„ 1:
  getUserById (UserController.java:23) â†’
  findById
```

---

## ğŸ“ å·²åˆ›å»ºçš„æ–‡ä»¶

```
treesitterdemo/
â”œâ”€â”€ callchain_analyzer.py        # Tree-sitter å®ç° V1
â”œâ”€â”€ callchain_analyzer_v2.py     # Tree-sitter å®ç° V2ï¼ˆæ”¹è¿›ç‰ˆï¼‰
â”œâ”€â”€ debug_parser.py              # è°ƒè¯•å·¥å…·
â”œâ”€â”€ install.sh                   # å®‰è£…è„šæœ¬
â”œâ”€â”€ run.sh                       # è¿è¡Œè„šæœ¬
â”œâ”€â”€ README.md                    # è¯¦ç»†æ–‡æ¡£
â”œâ”€â”€ æ€»ç»“.md                      # æ€»ç»“æŠ¥å‘Š
â””â”€â”€ å¿«é€Ÿå¼€å§‹.md                  # æœ¬æ–‡ä»¶
```

---

## ğŸ¯ å·¥å…·é€‰æ‹©å»ºè®®

| éœ€æ±‚ | æ¨èå·¥å…· | å‘½ä»¤ |
|------|---------|------|
| **Java è°ƒç”¨é“¾åˆ†æ** | JavaParser â­ | `java CallChainAnalyzer` |
| å¿«é€Ÿå®‰å…¨æ‰«æ | Semgrep | `semgrep --config=auto .` |
| å¤šè¯­è¨€é€šç”¨åˆ†æ | Tree-sitter | `python3 callchain_analyzer_v2.py` |
| ä»£ç ç¼–è¾‘å™¨åŠŸèƒ½ | Tree-sitter | - |

---

## ğŸ’¡ æ ¸å¿ƒç»“è®º

**å¯¹äº springboot-vuln-demo çš„è°ƒç”¨é“¾åˆ†æï¼š**
- âœ… **ä½¿ç”¨ JavaParser**ï¼ˆå‡†ç¡®ç‡ 100%ï¼‰
- âš ï¸ Tree-sitter æœ‰å±€é™æ€§ï¼ˆå‡†ç¡®ç‡çº¦ 70%ï¼‰
- ğŸ“š ä½œä¸ºå­¦ä¹  Tree-sitter çš„ç¤ºä¾‹é¡¹ç›®å¾ˆå¥½

---

## ğŸ”— å¿«é€Ÿé“¾æ¥

- JavaParser å®ç°ï¼š`../javaparsedemo/src/main/java/com/security/analyzer/CallChainAnalyzer.java`
- Semgrep è§„åˆ™ï¼š`../springboot-vuln-demo/semgrep-idor-rules.yaml`
- åˆ†ææŠ¥å‘Šï¼š`../springboot-vuln-demo/SEMGREP_åˆ†ææŠ¥å‘Š.md`

---

**ç¥ä½¿ç”¨æ„‰å¿«ï¼** ğŸ‰

